<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>BP205 Server</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="This is the official web page for the James Fraser Lab at UCSF.">
    <meta name="theme-color" content="#7fab91">
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/static/css/syntax.css" rel="stylesheet">
    <link href="/static/css/custom.css" rel="stylesheet">
    
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body>

    <!-- Static navbar -->
      <div class="navbar navbar-fixed-top navbar-default" role="navigation">
        <div class="container-fluid">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Fraser Lab @ UCSF</a>
          </div>
          <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
              
                
                  <li><a href="/" alt="home"> home</a></li>
                
              
                
                  <li><a href="/members" alt="people"> people</a></li>
                
              
                
                  <li><a href="/research" alt="projects"> projects</a></li>
                
              
                
                  <li><a href="/publications" alt="publications"> publications</a></li>
                
              
              <!-- <li><a href="https://sites.google.com/a/fraserlab.com/ucsf-private/" alt="Lab Private Area">private</a></li> -->
            </ul>
          </div><!--/.nav-collapse -->
        </div><!--/.container-fluid -->
      </div>

    <div class="container">


<h1 id="using-matplotlib-pyplot-to-make-plots-on-the-class-server">Using matplotlib (pyplot) to make plots on the class server</h1>

<p>The server for the class doesn’t have a GUI, which means it lacks a graphical
engine to show plots by default. However, since you are doing most of your
calculations in the server, it may be convenient to do plotting on the server
anyway. This can be accomplished easily with just two small changes to your
code.</p>

<p>The first is to change the backend that matplotlib uses. The backend is the
tool that matplotlib tells to draw lines, shapes, and everything else that makes
up a plot. For the server, we recommend using the “agg” backend. PDF and SVG are
also acceptable options.</p>

<p>Changing the backend happens at the top of your file. Find the following line in the code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</code></pre></div></div>

<p>or</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</code></pre></div></div>

<p>Replace this line with the following 3 lines:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s">'Agg'</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</code></pre></div></div>

<p>Now your backend is Agg, which will work on the server!</p>

<p>However, Agg is unable to interactively display a graph, so <code class="highlighter-rouge">plt.show()</code>
will not work. Therefore, the second thing you need to do is find the line:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>
<p>or</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p>Replace this line with the following:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">'OUTPUT_FILENAME.png'</span><span class="p">)</span> <span class="c"># You can also use SVG or PDF as a file extension if you prefer vector graphics.</span>
</code></pre></div></div>

<p>Instead of the plot being displayed in a popup, it will now be saved to the folder where you run your python script. Grab it with SCP or with a graphical tool like cyberduck or transmit and you can view it on your computer.</p>

<p>Happy coding!</p>


    </div>
    <hr>
    <div id="footer footer-fixed-bottom">
      <div class="container">
        <p class="text-muted credit"> This website is made using the template of <a href="https://github.com/fraser-lab/fraser-lab.github.io">the Fraser Lab</a>.</p>
      </div>
    </div>

     <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    
    <script src="/static/js/bootstrap.min.js"></script>
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-52773332-1', 'auto');
      ga('send', 'pageview');
    
    </script>
  </body>
</html>
